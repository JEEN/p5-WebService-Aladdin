package WebService::Aladdin::Item;

use strict;
use warnings;
use base qw(Class::Accessor::Fast);

__PACKAGE__->mk_accessors(qw/ 
publisher categoryId stockStatus author customerReviewRank description itemPage
priceSales creator content category categoryName link date priceStandard itemId isbn title cover pubDate guid mileage
/);

sub init {
    my ($self, $info) = @_;

    my $data;
    foreach my $key (keys %{ $info }) {
	my $type = $key;
	$type =~ s/^aladdin://;
	if ($type eq 'authors') {
	    my $author = $info->{'aladdin:authors'}->{'aladdin:author'};
	    if (ref($author) eq 'HASH') {
		$data->{author} = {
		    authorid => $author->{'-authorid'},
		    authorType => $author->{'-authorType'},
		    text       => $author->{'#text'},
		    desc       => $author->{'-desc'},
		};
	    } elsif (ref($author) eq 'ARRAY') {
		foreach my $p (@{ $info->{'aladdin:authors'}->{'aladdin:author'} }) {
		    unshift @{ $data->{$type} }, {
			authorid => $p->{'-authorid'},
			authorType => $p->{'-authorType'},
			text       => $p->{'#text'},
			desc       => $p->{'-desc'},
		    };
		}
	    }
	} else {
	    $data->{$type} = $info->{$key};
	}
    }
    $info;
}

1;


}

1;
